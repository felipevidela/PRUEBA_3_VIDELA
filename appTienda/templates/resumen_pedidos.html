<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Resumen de Pedidos</title>
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
    crossorigin="anonymous"
  />
</head>
<body class="bg-light">
  <div class="container py-4">
    <h1 class="mb-4">Resumen de pedidos</h1>

    <div class="row g-3">
      <div class="col-md-6">
        <h5>Por estado</h5>
        {% if por_estado %}
          <ul class="list-group">
            {% for item in por_estado %}
              <li class="list-group-item d-flex justify-content-between align-items-center">
                {{ item.estado }} <span class="badge bg-primary rounded-pill">{{ item.total }}</span>
              </li>
            {% endfor %}
          </ul>
        {% else %}
          <p class="text-muted">Sin pedidos.</p>
        {% endif %}
      </div>

      <div class="col-md-6">
        <h5>Por estado de pago</h5>
        {% if por_pago %}
          <ul class="list-group">
            {% for item in por_pago %}
              <li class="list-group-item d-flex justify-content-between align-items-center">
                {{ item.estado_pago }} <span class="badge bg-success rounded-pill">{{ item.total }}</span>
              </li>
            {% endfor %}
          </ul>
        {% else %}
          <p class="text-muted">Sin pedidos.</p>
        {% endif %}
      </div>
    </div>

    <h5 class="mt-4">Ãšltimos pedidos</h5>
    {% if recientes %}
      <div class="table-responsive">
        <table class="table table-sm">
          <thead>
            <tr>
              <th>ID</th>
              <th>Cliente</th>
              <th>Estado</th>
              <th>Pago</th>
              <th>Producto</th>
              <th>Token</th>
            </tr>
          </thead>
          <tbody>
            {% for p in recientes %}
              <tr>
                <td>{{ p.id }}</td>
                <td>{{ p.nombre_cliente }}</td>
                <td>{{ p.get_estado_display }}</td>
                <td>{{ p.get_estado_pago_display }}</td>
                <td>{% if p.producto %}{{ p.producto.nombre }}{% else %}-{% endif %}</td>
                <td><a href="/seguimiento/{{ p.token }}/">{{ p.token }}</a></td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    {% else %}
      <p class="text-muted">No hay pedidos recientes.</p>
    {% endif %}
  </div>

  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"
  ></script>
</body>
</html>
